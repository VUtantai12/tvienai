<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Thﾆｰ vi盻㌻ Online</title>
<style>
body{
  font-family: Arial;
  margin:0;
  background:#f4f6f8;
}
header{
  background:#2c3e50;
  color:white;
  padding:15px;
  display:flex;
  justify-content:space-between;
}
nav button{
  margin-left:10px;
}
.container{
  padding:20px;
}
.hidden{display:none;}

input, button{
  padding:8px;
  margin:5px 0;
}
.book{
  background:white;
  padding:10px;
  margin:10px 0;
  border-left:5px solid #3498db;
}
</style>
</head>

<body>

<header>
  <h2>答 Thﾆｰ vi盻㌻ Online</h2>
  <nav>
    <span id="userInfo"></span>
    <button onclick="logout()">ﾄ斉ハg xu蘯･t</button>
  </nav>
</header>

<div class="container">

<!-- LOGIN / REGISTER -->
<div id="auth">
  <h3>ﾄ斉ハg nh蘯ｭp</h3>
  <input id="loginUser" placeholder="Tﾃｪn ﾄ惰ハg nh蘯ｭp">
  <input id="loginPass" type="password" placeholder="M蘯ｭt kh蘯ｩu">
  <button onclick="login()">ﾄ斉ハg nh蘯ｭp</button>

  <h3>ﾄ斉ハg kﾃｽ</h3>
  <input id="regUser" placeholder="Tﾃｪn ﾄ惰ハg nh蘯ｭp">
  <input id="regPass" type="password" placeholder="M蘯ｭt kh蘯ｩu">
  <button onclick="register()">ﾄ斉ハg kﾃｽ</button>
</div>

<!-- MAIN -->
<div id="main" class="hidden">
  <h3>Qu蘯｣n lﾃｽ sﾃ｡ch</h3>
  <input id="bookName" placeholder="Tﾃｪn sﾃ｡ch">
  <button onclick="addBook()">Thﾃｪm sﾃ｡ch</button>

  <div id="bookList"></div>
</div>

</div>

<script>
let users = JSON.parse(localStorage.getItem("users")) || [];
let books = JSON.parse(localStorage.getItem("books")) || [];
let currentUser = localStorage.getItem("currentUser");

function save(){
  localStorage.setItem("users", JSON.stringify(users));
  localStorage.setItem("books", JSON.stringify(books));
}

function register(){
  let u = regUser.value;
  let p = regPass.value;
  if(!u || !p) return alert("Nh蘯ｭp ﾄ黛ｻｧ thﾃｴng tin");
  if(users.find(x=>x.u===u)) return alert("Tﾃi kho蘯｣n t盻渡 t蘯｡i");
  users.push({u,p});
  save();
  alert("ﾄ斉ハg kﾃｽ thﾃnh cﾃｴng");
}

function login(){
  let u = loginUser.value;
  let p = loginPass.value;
  let ok = users.find(x=>x.u===u && x.p===p);
  if(!ok) return alert("Sai tﾃi kho蘯｣n");
  localStorage.setItem("currentUser", u);
  location.reload();
}

function logout(){
  localStorage.removeItem("currentUser");
  location.reload();
}

function addBook(){
  let name = bookName.value;
  if(!name) return;
  books.push(name);
  save();
  renderBooks();
  bookName.value="";
}

function delBook(i){
  books.splice(i,1);
  save();
  renderBooks();
}

function renderBooks(){
  bookList.innerHTML="";
  books.forEach((b,i)=>{
    bookList.innerHTML+=`
      <div class="book">
        ${b}
        <button onclick="delBook(${i})">Xoﾃ｡</button>
      </div>`;
  });
}

if(currentUser){
  auth.classList.add("hidden");
  main.classList.remove("hidden");
  userInfo.innerText="Xin chﾃo: "+currentUser;
  renderBooks();
}else{
  document.querySelector("nav").style.display="none";
}
</script>

</body>
</html>
